<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Planer Pieczenia Sernika</title>

<style>
* {
  box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    background: #ffe6f0;
    margin: 0;
    padding: 20px;
}

.container {
    max-width: 700px;
    margin: auto;
    background: #fff0f6;
    padding: 25px;
    border-radius: 16px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}

h1 { 
    text-align: center;
    color: #d46ebf;
}

input, select, button {
    padding: 12px;
    margin: 6px 0;
    border-radius: 10px;
    border: 1px solid #d46ebf;
    width: 100%;
    font-size: 16px;
}

button {
    background: #d46ebf;
    color: white;
    border: none;
    cursor: pointer;
    font-size: 17px;
}

button:hover { 
    background: #b347a1;
}

.stage {
    display: grid;
    grid-template-columns: 1fr 100px 120px 120px;
    gap: 10px;
    margin-bottom: 12px;
}

@media (max-width: 600px) {
    .stage {
        display: flex;
        flex-direction: column;
    }
}

.result {
    margin-top: 25px;
    padding: 18px;
    background: #ffe6f0;
    border-radius: 12px;
}

.big-time {
    font-size: 24px;
    font-weight: bold;
    margin-top: 15px;
    color: #d46ebf;
}

span.start-time {
    font-weight: bold;
    font-size: 19px;
    color: #d46ebf;
}

/* Toggle */
.toggle {
    background: #f7c1e3;
    color: #a03c86;
    font-weight: bold;
}

.hidden {
    display: none;
}

/* Start time styling */
#startTime {
  display: block;
  width: 100%;
  padding: 16px;
  border-radius: 18px;
  border: 2px solid #d48ac2;
  font-size: 18px;
  background-color: #ffffff;
  -webkit-appearance: none;
  appearance: none;
}

input[type="time"]::-webkit-calendar-picker-indicator {
  margin: 0;
}

/* Input with unit */
.input-with-unit {
    position: relative;
    width: 100%;
}

.input-with-unit input {
    padding-right: 45px;
}

.input-with-unit .unit {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    font-weight: 600;
    color: #a03c86;
    pointer-events: none;
}
</style>
</head>

<body>
<div class="container">
<h1>üç∞ Planer Pieczenia Sernika</h1>

<label>Godzina w≈Ço≈ºenia:</label>
<input type="time" id="startTime">

<button class="toggle" onclick="toggleStages()">
    ‚ñº Poka≈º etapy
</button>

<div id="stagesContainer" class="hidden">

<h3>Etapy:</h3>

<div id="stages">

<div class="stage">
<input type="text" value="Etap 1">
<div class="input-with-unit">
    <input type="number" value="20">
    <span class="unit">min</span>
</div>
<select>
<option>G√≥ra-d√≥≈Ç</option>
<option>Sam d√≥≈Ç</option>
</select>
<select>
<option>Bez przykrycia</option>
<option>Z przykryciem</option>
</select>
</div>

<div class="stage">
<input type="text" value="Etap 2">
<div class="input-with-unit">
    <input type="number" value="15">
    <span class="unit">min</span>
</div>
<select>
<option>Sam d√≥≈Ç</option>
<option>G√≥ra-d√≥≈Ç</option>
</select>
<select>
<option>Z przykryciem</option>
<option>Bez przykrycia</option>
</select>
</div>

<div class="stage">
<input type="text" value="Etap 3">
<div class="input-with-unit">
    <input type="number" value="10">
    <span class="unit">min</span>
</div>
<select>
<option>Sam d√≥≈Ç</option>
<option>G√≥ra-d√≥≈Ç</option>
</select>
<select>
<option>Bez przykrycia</option>
<option>Z przykryciem</option>
</select>
</div>

<div class="stage">
<input type="text" value="Etap 4">
<div class="input-with-unit">
    <input type="number" value="5">
    <span class="unit">min</span>
</div>
<select>
<option>G√≥ra-d√≥≈Ç</option>
<option>Sam d√≥≈Ç</option>
</select>
<select>
<option>Bez przykrycia</option>
<option>Z przykryciem</option>
</select>
</div>

</div>
</div>

<button onclick="calculate()">Oblicz harmonogram</button>

<div id="result" class="result"></div>

</div>

<script>

function toggleStages() {
    const container = document.getElementById("stagesContainer");
    const button = document.querySelector(".toggle");

    container.classList.toggle("hidden");

    if (container.classList.contains("hidden")) {
        button.innerHTML = "‚ñº Poka≈º etapy";
    } else {
        button.innerHTML = "‚ñ≤ Ukryj etapy";
    }
}

function calculate() {
    const startInput = document.getElementById("startTime").value;
    if (!startInput) return;

    const stages = document.querySelectorAll(".stage");
    let [hours, minutes] = startInput.split(":").map(Number);

    let currentTime = new Date();
    currentTime.setHours(hours);
    currentTime.setMinutes(minutes);

    let resultHTML = "<h3>Harmonogram:</h3>";

    stages.forEach(stage => {
        const name = stage.querySelector("input[type='text']").value;
        const duration = parseInt(stage.querySelector("input[type='number']").value);
        const selects = stage.querySelectorAll("select");
        const mode = selects[0].value;
        const cover = selects[1].value;

        let start = new Date(currentTime);
        currentTime.setMinutes(currentTime.getMinutes() + duration);
        let end = new Date(currentTime);

        resultHTML += `
        <div class="big-time">${name}</div>
        <div>
            Rozpocznij: <span class="start-time">${formatTime(start)}</span> ‚Üí 
            Zako≈Ñcz: ${formatTime(end)}<br>
            ${mode} | ${cover}
        </div>
        <hr>
        `;
    });

    document.getElementById("result").innerHTML = resultHTML;
}

function formatTime(date) {
    return date.toTimeString().slice(0,5);
}

</script>
</body>
</html>
